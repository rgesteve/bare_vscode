<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="with=device-width, initial-scale=1.0">
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-treetable/3.2.0/css/jquery.treetable.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-treetable/3.2.0/css/jquery.treetable.theme.default.min.css" />
    
    <style>
    .bar-chart {
        background-color : #c7d9d9;
    }
    </style>
  </head>
  <body>
    <h1>Combining pix and netdrawer</h1>

    <div syle="display:none">
    <h2>Local lines counter</h2>
    <div id="lines-of-code-counter">0</div>

    <h2>Latest communication from host</h2>
    <div id="latest-comm"></div>
    </div>

    <object type="image/svg+xml" data="${modelPath}">
            Your browser does not support SVG
          </object>
    </object>

    <script>
    (function () {
        const vscode = acquireVsCodeApi();
        const counter = document.getElementById("lines-of-code-counter");
        const commMsg = document.getElementById("latest-comm");

        let count = 0;
        setInterval( () => {
            counter.textContent = count++;
            if ((count % 250) === 0) {
                console.log("Sending a message to the host...");
                vscode.postMessage({
                    command: 'alert',
                    text: 'communicating with host'
                });
            }
        }, 500);

        // Handle a message inside the webview
        window.addEventListener('message', event => {
            const message = event.data; // the message data the host sent
            commMsg.textContent = "Just received a message at time [" + count + "]";
            console.log("This should be displayed in the developer tools if they're open");
        });
    })();
    </script>
  </body>
</html>
